// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Enum para el género
enum Gender {
  male
  female
  other
}

model User {
  // Propiedades sin relación
  id          String    @id @default(uuid())
  name        String?
  lastName    String?
  email       String    @unique
  dateOfBirth DateTime?
  phone       String?
  gender      Gender?
  province    String?
  postalCode  String?
  password    String //TODO Cifrar contraseña

  // Relaciones
  // Uno a uno
  country Country? @relation(fields: [countryId], references: [id])
  countryId String

  // Uno a muchos
  Posts     Post[]
}

model Post {
  // Propiedades sin relación
  id             String    @id @default(uuid())
  name           String
  dateOfBirth    DateTime?
  gender         Gender?
  age            Int?
  province       String?
  transportation Boolean?
  contactPhone   String?
  history        String?
  photos         String[]

  // Relaciones
  // Uno a uno
  species      Species       @relation(fields: [speciesId], references: [id])
  breed        Breed         @relation(fields: [breedId], references: [id])
  country      Country?      @relation(fields: [countryId], references: [id])
  adoptionInfo AdoptionInfo?

  // Uno a muchos
  healthConditions HealthCondition[]
  behavior         Behavior[]

  // Muchos a uno
  user User @relation(fields: [userId], references: [id])

  // Campos de relación
  userId    String
  speciesId String
  breedId   String
  countryId String?
}

// Modelo de país
model Country {
  // Propiedades sin relación
  id   String @id
  name String

  // Relaciones
  // Uno a muchos
  users User[]
  Post  Post[]
}

// Modelo de especie de mascota
model Species {
  // Propiedades sin relación
  id   String @id @default(uuid())
  name String

  // Relaciones
  // Uno a muchos
  Posts Post[]
}

// Modelo de raza de mascota
model Breed {
  // Propiedades sin relación
  id   String @id @default(uuid())
  name String

  // Relaciones
  // Uno a muchos
  Posts Post[]
}

// Modelo de condiciones de salud de la mascota
model HealthCondition {
  // Propiedades sin relación
  id        String @id @default(uuid())
  condition String

  // Relaciones
  // Muchos a uno
  Post Post @relation(fields: [postId], references: [id])

  // Campos de relación
  postId String
}

// Modelo de comportamiento de la mascota
model Behavior {
  // Propiedades sin relación
  id        String  @id @default(uuid())
  trait     String
  isBoolean Boolean

  // Relaciones
  // Muchos a uno
  post Post @relation(fields: [postId], references: [id])

  // Campos de relación
  postId String
}

// Modelo de información de adopción
model AdoptionInfo {
  // Propiedades sin relación
  id           String @id @default(uuid())
  adoptionInfo String

  // Relaciones
  // Uno a uno
  post Post @relation(fields: [postId], references: [id])

  // Campos de relación
  postId String @unique
}
